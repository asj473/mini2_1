<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>리뷰 게시판</title>
<style>
	@import url(https://fonts.googleapis.com/css?family=Raleway);
body {
  margin: 0px;
}
 nav { 
 /*    margin-top: 40px; */ 
   padding: 24px; 
   text-align: center; 
   font-family: Raleway; 
   box-shadow: 2px 2px 8px rgba(0, 0, 0, 0.5); 
 } 
#nav-3 {
  background: #EEA200;
}
.link-3 {
  transition: 0.4s;
  color: #ffffff;
  font-size: 20px;
  text-decoration: none;
  padding: 0 10px;
  margin: 0 10px;
}
.link-3:hover {
  background-color: #ffffff;
  color: #EEA200;
  padding: 24px 10px;
}
</style>
<script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.10/handlebars.min.js"></script>
<script src="/themat/lib/js/jquery.min.js"></script>
	<!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
	<link rel="shortcut icon" href="favicon.ico">

	<link href='https://fonts.googleapis.com/css?family=Playfair+Display:400,700,400italic,700italic|Merriweather:300,400italic,300italic,400,700italic' rel='stylesheet' type='text/css'>
	
	<!-- Animate.css -->
	<link rel="stylesheet" href="/themat/lib/css/animate.css">
	<!-- Icomoon Icon Fonts-->
	<link rel="stylesheet" href="/themat/lib/css/icomoon.css">
	<!-- Simple Line Icons -->
	<link rel="stylesheet" href="/themat/lib/css/simple-line-icons.css">
	<!-- Datetimepicker -->
	<link rel="stylesheet" href="/themat/lib/css/bootstrap-datetimepicker.min.css">
	<!-- Flexslider -->
	<link rel="stylesheet" href="/themat/lib/css/flexslider.css">
	<!-- Bootstrap  -->
	<link rel="stylesheet" href="/themat/lib/css/bootstrap.css">

	<link rel="stylesheet" href="/themat/lib/css/style.css">
	
	<script src="/themat/lib/js/modernizr-2.6.2.min.js"></script>
</head>
<body>

<!-- <div id="fh5co-container"> -->

	<div class="flexslider">
		<div class="fh5co-overlay"></div>
	</div>
		
	<div class="js-sticky">
		<div class="fh5co-main-nav">
			<div class="container-fluid">
				<div class="fh5co-menu-1">
					<a href="/themat/index.html" data-nav-section="events">home</a>
					<a href="#" data-nav-section="features">Gallery</a>
				</div>
				<div class="fh5co-logo">
					<a href="../../index.html">Themat</a>
				</div>
				<div class="fh5co-menu-2">
					<a href="#" data-nav-section="menu">Review</a>
					<a href="#" data-nav-section="reservation">Q&A</a>
				</div>
			</div>
		</div>
	</div>
		
		
	<div id="fh5co-menus" data-section="menu">
	
	<nav id="nav-3">
  		<a class="link-3" href="#" data-nav-section="hom">한식</a>
  		<a class="link-3" href="#">분식</a>
 		<a class="link-3" href="#">일식/돈까스</a>
  		<a class="link-3" href="#">중식</a>
  		<a class="link-3" href="#">족발/보쌈</a>
	</nav>

	
	<div id="test"></div>
	<div class="container block-center" data-section="hom">
		<div id="list">
		</div>
		
		<nav>
			<ul class="pagination"></ul>
		</nav>
	</div>
	
	</div>
<!-- </div> -->
	
	
	
	
	
	
	
	
	
<div id="fh5co-footer">
	<div class="container">
		<div class="row row-padded">
			<div class="col-md-12 text-center">
				<p class="to-animate">&copy; 2016 Foodee Free HTML5 Template. <br> Designed by <a href="http://freehtml5.co/" target="_blank">FREEHTML5.co</a> Demo /themat/lib/images: <a href="http://pexels.com/" target="_blank">Pexels</a> <br> Tasty Icons Free <a href="http://handdrawngoods.com/store/tasty-icons-free-food-icons/" target="_blank">handdrawngoods</a>
				</p>
				<p class="text-center to-animate"><a href="#" class="js-gotop">Go To Top</a></p>
			</div>
		</div>
		<div class="row">
			<div class="col-md-12 text-center">
				<ul class="fh5co-social">
					<li class="to-animate-2"><a href="#"><i class="icon-facebook"></i></a></li>
					<li class="to-animate-2"><a href="#"><i class="icon-twitter"></i></a></li>
					<li class="to-animate-2"><a href="#"><i class="icon-instagram"></i></a></li>
				</ul>
			</div>
		</div>
	</div>
</div>

<script id="review-store" type="text/x-handlebars-template">
<div id="fh5co-events" data-section="events" style="background-image: url(/themat/lib/images/slide_2.jpg);" data-stellar-background-ratio="0.5">
	<div class="fh5co-overlay"></div>
	<div class="container">
		<div class="row">
				
{{#list}} 
					<div class="col-md-4">
						<div class="fh5co-event">
							<h3>{{name}}</h3>
							<span class="fh5co-event-meta">{{rating}}</span>
							<img src="{{img}}" class=".img-thumbnail" alt="Cinque Terre">
							<img src="{{img}}" style="border:tomato;" width="200px" heigth="200px" />
							<!--<p><a href="#" class="btn btn-primary btn-outline">Read More</a></p>--!>
						</div>
					</div>
{{/list}} 

		</div>
	</div>
</div>	
</script>

<script id="entry-template" type="text/x-handlebars-template"> 
	<table>
		<thead>
		<tr>
			<th>가</th>		
			<th>나</th>		
			<th>다</th>		
			<th>라</th>		
			<th>마</th>		
			<th>바</th>		
			<th>사</th>		
		</tr>
		</thead>
		<tbody>
       	 {{#list}} 
        <tr> 
            <td>{{no}}</td> 
            <td>{{storeNo}}</td> 
            <td>{{id}}</td> 
            <td><a href='javascript:'>{{title}}</a></td> 
            <td>{{content}}</td> 
            <td>{{rating}}</td> 
            <td>{{regDate}}</td> 
        </tr> 
        {{/list}} 
		</tbody>
	</table>
</script>


<script>
	function listStore(pageNo){
		if (pageNo === undefined) {
			pageNo = 1;
		}
		$.ajax({
			url : "/themat/review/listStore.do",
			data: {pageNo : pageNo},
			dataType : "json"
		}).done(function(result){
// 			console.dir(result);
			var source = $("#review-store").html(); 
			//핸들바 템플릿 컴파일
			var template = Handlebars.compile(source); 
			//핸들바 템플릿에 데이터를 바인딩해서 HTML 생성
			var html = template(result);
			//생성된 HTML을 DOM에 주입
			//$('#list').html(html);
			$('#test').html(html);
			
			console.dir(result.pageResult);
			makePageLink(result.pageResult);
		});
	}
	
	function makePageLink(data) {
		var html = "";
		if (data.count != 0) {
			var clz = "";
			if (data.prev == false) {
				clz = "disabled";
			}
			html += '<li class="' + clz + '">';
			
			var fn = "";
			
			if (data.prev == true) {
				fn = "javascript:pageList(" + (data.beginPage - 1) + ");";
			}
			html += '<a href="' + fn + '" aria-label="Previous">';
			html += '    <span aria-hidden="true">&laquo;</span>';
			html += '</a>';
		    html += '</li>';
			
		    for (var i = data.beginPage; i <= data.endPage; i++) {
		    	if (i == data.pageNo) {
				    html += '<li class="active"><a href="#1">' + i + '</a></li>';
		    	}
		    	else {
		    		html += '<li><a href="javascript:listStore(' + i + ');">' + i + '</a></li>';
		    	}
		    }
		    
			clz = "";
			if (data.next == false) {
				clz = "disabled";
			}
			html += '<li class="' + clz + '">';
			
			fn = "";
			
			if (data.next == true) {
				fn = "javascript:pageList(" + (data.endPage + 1) + ");";
			}
			html += '<a href="' + fn + '" aria-label="Next">';
			html += '    <span aria-hidden="true">&raquo;</span>';
			html += '</a>';
		    html += '</li>';
		}
		
		$("nav > ul.pagination").html(html);
	}
	
	function listReview(no){
		$.ajax({
			url : "/themat/review/listReview.do",
			data : {no:no},
			dataType : "json"
		}).done(function(result){
			console.dir(result);
			
			var store = result.store;
			console.log(store);
			var html = "";
			html += "<div class='wall'>";
			html += "<ul>";
			html += "<li>"+store.name+"</li>";
			html += "<li>"+store.address+"</li>";
			html += "<li>"+store.call+"</li>";
			html += "<li>"+store.rating+"</li>";
			html += "</ul>";
			html += "</div>";
			$('#list').html(html);
			
			var source = $("#entry-template").html(); 
			//핸들바 템플릿 컴파일
			var template = Handlebars.compile(source); 
			//핸들바 템플릿에 데이터를 바인딩해서 HTML 생성
			html = template(result);
			//생성된 HTML을 DOM에 주입
			$('#list').append(html);
			
		});
	}
	
	function detailReview(){
		
	}
	
	function deleteReview(){
		
	}
	
	function updateReview(){
		
	}
	
	$("#list").on(
  			 "click", 
  			 "#test", 
  			 function(){
  				console.log()
  				listReview();
  			 }
	);
// 	$("#test").on("click", function(){
// 		listReview();
// 	});
	
	listStore();
</script>
	<!-- jQuery -->
	<script src="/themat/lib/js/jquery.min.js"></script>
	<!-- jQuery Easing -->
	<script src="/themat/lib/js/jquery.easing.1.3.js"></script>
	<!-- Bootstrap -->
	<script src="/themat/lib/js/bootstrap.min.js"></script>
	<!-- Bootstrap DateTimePicker -->
	<script src="/themat/lib/js/moment.js"></script>
	<script src="/themat/lib/js/bootstrap-datetimepicker.min.js"></script>
	<!-- Waypoints -->
	<script src="/themat/lib/js/jquery.waypoints.min.js"></script>
	<!-- Stellar Parallax -->
	<script src="/themat/lib/js/jquery.stellar.min.js"></script>

	<!-- Flexslider -->
	<script src="/themat/lib/js/jquery.flexslider-min.js"></script>
	<script>
		$(function () {
	       $('#date').datetimepicker();
	   });
	</script>
	<!-- Main JS -->
	<script src="/themat/lib/js/main.js"></script>
</body>
</html>